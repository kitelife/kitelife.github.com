<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Effective Go | Xiayf的技术笔记</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.3.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
    

        
    
    
    <link rel="next" href="../../language/go/learning-go.html" />
    
    
    <link rel="prev" href="../../language/go.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="2.3.1" data-basepath="../.." data-revision="Thu Sep 10 2015 01:07:53 GMT+0800 (CST)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="arch/index.html">
            
                
                    <a href="../../arch/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        架构
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="arch/tumblr-arch.html">
            
                
                    <a href="../../arch/tumblr-arch.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Tumblr架构设计
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="arch/reference.html">
            
                
                    <a href="../../arch/reference.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        资料
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="language/index.html">
            
                
                    <a href="../../language/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        编程语言
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="language/python.html">
            
                
                    <a href="../../language/python.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Python
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="language/python/basic.html">
            
                
                    <a href="../../language/python/basic.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        基础知识
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="language/php.html">
            
                
                    <a href="../../language/php.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        PHP
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="language/php/basic.html">
            
                
                    <a href="../../language/php/basic.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.1.</b>
                        
                        基础知识
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="language/go.html">
            
                
                    <a href="../../language/go.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Go
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="2.3.1" data-path="language/go/effective-go.html">
            
                
                    <a href="../../language/go/effective-go.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.1.</b>
                        
                        Effective Go
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="language/go/learning-go.html">
            
                
                    <a href="../../language/go/learning-go.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.2.</b>
                        
                        Go学习笔记
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="language/js.html">
            
                
                    <a href="../../language/js.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        JavaScript
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="language/js/frontend-dv.html">
            
                
                    <a href="../../language/js/frontend-dv.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.1.</b>
                        
                        前端数据可视化
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4.2" data-path="language/js/modular.html">
            
                
                    <a href="../../language/js/modular.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.2.</b>
                        
                        前端模块化
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4.3" data-path="language/js/tools.html">
            
                
                    <a href="../../language/js/tools.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.3.</b>
                        
                        前端工具
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4.4" data-path="language/js/hybrid-mobile.html">
            
                
                    <a href="../../language/js/hybrid-mobile.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.4.</b>
                        
                        混合移动开发
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4.5" data-path="language/js/node.html">
            
                
                    <a href="../../language/js/node.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.5.</b>
                        
                        NodeJS
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="language/c.html">
            
                
                    <a href="../../language/c.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        C
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.5.1" data-path="language/c/learning-c.html">
            
                
                    <a href="../../language/c/learning-c.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.1.</b>
                        
                        C学习笔记
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="operation/index.html">
            
                
                    <a href="../../operation/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        运维
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="operation/os.html">
            
                
                    <a href="../../operation/os.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        操作系统
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="operation/sql.html">
            
                
                    <a href="../../operation/sql.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        SQL
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="operation/sql/mysql.html">
            
                
                    <a href="../../operation/sql/mysql.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.1.</b>
                        
                        MySQL
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="operation/sql/sqlite.html">
            
                
                    <a href="../../operation/sql/sqlite.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.2.</b>
                        
                        SQLite
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="operation/nosql.html">
            
            <span><b>3.3.</b> NoSQL</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="operation/mq.html">
            
                
                    <a href="../../operation/mq.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        MQ
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="operation/nginx.html">
            
                
                    <a href="../../operation/nginx.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Nginx
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="operation/haproxy.html">
            
                
                    <a href="../../operation/haproxy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        HAProxy
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.6.1" data-path="operation/haproxy/conf-manual.html">
            
                
                    <a href="../../operation/haproxy/conf-manual.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.1.</b>
                        
                        HAProxy文档精简翻译版
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="operation/others.html">
            
                
                    <a href="../../operation/others.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                        其他
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="basic/index.html">
            
                
                    <a href="../../basic/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        基础
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="basic/system.html">
            
                
                    <a href="../../basic/system.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        系统编程
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1.1" data-path="basic/system/tlpi.html">
            
                
                    <a href="../../basic/system/tlpi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.1.</b>
                        
                        Linux/UNIX系统编程手册
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="basic/algorithm.html">
            
            <span><b>4.2.</b> 算法</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="basic/network.html">
            
            <span><b>4.3.</b> 网络</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="basic/compiler.html">
            
            <span><b>4.4.</b> 编译</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="basic/storage.html">
            
            <span><b>4.5.</b> 存储</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="others/index.html">
            
                
                    <a href="../../others/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        其他
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="others/quotes.html">
            
                
                    <a href="../../others/quotes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        启示语录
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="others/web.html">
            
                
                    <a href="../../others/web.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Web开发
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="others/ds.html">
            
                
                    <a href="../../others/ds.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        分布式系统
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="others/stackoverflow-collection.html">
            
                
                    <a href="../../others/stackoverflow-collection.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        StackOverflow问答精选
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="others/other.html">
            
                
                    <a href="../../others/other.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        碎碎念
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.5.1" data-path="others/other/inspired.html">
            
                
                    <a href="../../others/other/inspired.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.1.</b>
                        
                        启示录
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5.2" data-path="others/other/taobao-ten-years.html">
            
                
                    <a href="../../others/other/taobao-ten-years.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.2.</b>
                        
                        淘宝技术这十年
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Xiayf的技术笔记</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h2 id="%E3%80%8Aeffective-go%E3%80%8B%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">&#x300A;Effective Go&#x300B;&#x5B66;&#x4E60;&#x7B14;&#x8BB0;</h2>
<h4 id="%E7%B1%BB%E5%9E%8B%E5%88%87%E6%8D%A2">&#x7C7B;&#x578B;&#x5207;&#x6362;</h4>
<p>&#x53EF;&#x4EE5;&#x4F7F;&#x7528;switch&#x53BB;&#x53D1;&#x73B0;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x53D8;&#x91CF;&#x7684;&#x52A8;&#x6001;&#x7C7B;&#x578B;&#x3002;</p>
<pre><code class="lang-go"><span class="hljs-keyword">var</span> t <span class="hljs-keyword">interface</span>{}
t = functionOfSomeType()
<span class="hljs-keyword">switch</span> t := t.(<span class="hljs-keyword">type</span>) {
  <span class="hljs-keyword">default</span>:
  fmt.Printf(<span class="hljs-string">&quot;unexpected type %T&quot;</span>, t)  <span class="hljs-comment">// %T&#x6253;&#x5370;t&#x7684;&#x7C7B;&#x578B;</span>
  <span class="hljs-keyword">case</span> <span class="hljs-typename">bool</span>:
  fmt.Printf(<span class="hljs-string">&quot;boolean %t\n&quot;</span>, t)
  <span class="hljs-keyword">case</span> <span class="hljs-typename">int</span>:
  fmt.Printf(<span class="hljs-string">&quot;integer %d\n&quot;</span>, t)
  <span class="hljs-keyword">case</span> *<span class="hljs-typename">bool</span>:
  fmt.Printf(<span class="hljs-string">&quot;pointer to boolean %t\n&quot;</span>, *t)
  <span class="hljs-keyword">case</span> *<span class="hljs-typename">int</span>:
  fmt.Printf(<span class="hljs-string">&quot;pointer to integer %d\n&quot;</span>, *t)
}
</code></pre>
<h4 id="defer">Defer</h4>
<p>Go&apos;s defer statement schedules a function call (the deferred function) to be run immediately before the function executing the defer returns. &#x8BE5;&#x65B9;&#x6CD5;&#x663E;&#x5F97;&#x4E0D;&#x540C;&#x5E38;&#x89C4;&#xFF0C;&#x4F46;&#x5374;&#x662F;&#x5904;&#x7406;&#x4E00;&#x4E9B;&#x60C5;&#x51B5;&#x7684;&#x6709;&#x6548;&#x65B9;&#x5F0F;&#xFF0C;&#x5982;&#x65E0;&#x8BBA;&#x51FD;&#x6570;&#x600E;&#x6837;&#x8FD4;&#x56DE;&#xFF0C;&#x90FD;&#x5FC5;&#x987B;&#x8FDB;&#x884C;&#x8D44;&#x6E90;&#x91CA;&#x653E;&#x3002;</p>
<h4 id="%E6%95%B0%E7%BB%84">&#x6570;&#x7EC4;</h4>
<p>Go&#x548C;C&#x4E2D;&#x7684;&#x6570;&#x7EC4;&#x7684;&#x4E3B;&#x8981;&#x533A;&#x522B;&#x5728;&#x4E8E;&#xFF0C;&#x5728;Go&#x4E2D;&#xFF0C;</p>
<ul>
<li>&#x6570;&#x7EC4;&#x662F;&#x503C;&#x3002;&#x5C06;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x8D4B;&#x503C;&#x7ED9;&#x53E6;&#x4E00;&#x4E2A;&#x5C06;&#x590D;&#x5236;&#x5176;&#x6240;&#x6709;&#x7684;&#x5143;&#x7D20;&#x3002;</li>
<li>&#x7279;&#x522B;&#x5730;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x6570;&#x7EC4;&#x7ED9;&#x51FD;&#x6570;&#xFF0C;&#x5B83;&#x5C06;&#x6536;&#x5230;&#x6B64;&#x6570;&#x7EC4;&#x7684;&#x4E00;&#x4E2A;&#x526F;&#x672C;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x6307;&#x5411;&#x5B83;&#x7684;&#x6307;&#x9488;&#x3002;</li>
<li>&#x6570;&#x7EC4;&#x7684;&#x5C3A;&#x5BF8;&#x662F;&#x5176;&#x7C7B;&#x578B;&#x7684;&#x4E00;&#x90E8;&#x5206;&#x3002;[10]int&#x548C;[20]int&#x662F;&#x4E0D;&#x540C;&#x7684;&#x7C7B;&#x578B;&#x3002;</li>
</ul>
<p>&#x6570;&#x7EC4;&#x662F;&#x503C;&#x7684;&#x5C5E;&#x6027;&#x5F88;&#x6709;&#x7528;&#xFF0C;&#x4F46;&#x4EE3;&#x4EF7;&#x6602;&#x8D35;; &#x5982;&#x679C;&#x4F60;&#x60F3;&#x8981;&#x7C7B;&#x4F3C;C&#x7684;&#x884C;&#x4E3A;&#x548C;&#x6548;&#x7387;&#xFF0C;&#x53EF;&#x4EE5;&#x4F20;&#x9012;&#x4E00;&#x4E2A;&#x6307;&#x5411;&#x6570;&#x7EC4;&#x7684;&#x6307;&#x9488;&#x3002;&#x4F46;&#x8FD9;&#x79CD;&#x98CE;&#x683C;&#x5E76;&#x4E0D;&#x662F;Go&#x7684;&#x4E60;&#x60EF;&#x7528;&#x6CD5;&#xFF0C;&#x5207;&#x7247;&#x624D;&#x662F;&#x3002;</p>
<h4 id="%E5%88%87%E7%89%87-slice">&#x5207;&#x7247;(slice)</h4>
<p>&#x5207;&#x7247;&#x901A;&#x8FC7;&#x5305;&#x88C5;&#x6570;&#x7EC4;&#x800C;&#x7ED9;&#x51FA;&#x4E86;&#x5BF9;&#x6570;&#x636E;&#x5E8F;&#x5217;&#x7684;&#x901A;&#x7528;&#x3001;&#x5F3A;&#x5927;&#x548C;&#x65B9;&#x4FBF;&#x7684;&#x63A5;&#x53E3;&#x3002;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;Go&#x4E2D;&#x7684;&#x6570;&#x7EC4;&#x7F16;&#x7A0B;&#x662F;&#x901A;&#x8FC7;&#x5207;&#x7247;&#x800C;&#x975E;&#x7B80;&#x5355;&#x6570;&#x7EC4;&#x6765;&#x5B8C;&#x6210;&#x7684;&#x3002;</p>
<p>&#x5207;&#x7247;&#x4FDD;&#x5B58;&#x4E86;&#x5BF9;&#x5176;&#x5E95;&#x5C42;&#x6570;&#x7EC4;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x4F60;&#x5C06;&#x4E00;&#x4E2A;&#x5207;&#x7247;&#x8D4B;&#x503C;&#x7ED9;&#x53E6;&#x5916;&#x4E00;&#x4E2A;&#xFF0C;&#x8FD9;&#x4E24;&#x4E2A;&#x5207;&#x7247;&#x5C06;&#x5F15;&#x7528;&#x540C;&#x4E00;&#x4E2A;&#x5E95;&#x5C42;&#x6570;&#x7EC4;&#x3002;</p>
<h4 id="%E5%B8%B8%E9%87%8F">&#x5E38;&#x91CF;</h4>
<p>Go&#x4E2D;&#x7684;&#x5E38;&#x91CF;&#x5C31;&#x662F;&#x4E0D;&#x53EF;&#x53D8;&#x5E38;&#x6570;&#xFF0C;&#x5B83;&#x4EEC;&#x5728;&#x7F16;&#x8BD1;&#x65F6;&#x88AB;&#x521B;&#x5EFA;&#xFF0C;&#x5373;&#x4FBF;&#x5728;&#x51FD;&#x6570;&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x5C40;&#x90E8;&#x5E38;&#x91CF;&#x4E5F;&#x662F;&#x5982;&#x6B64;&#xFF0C;&#x5E38;&#x91CF;&#x53EA;&#x80FD;&#x662F;&#x6570;&#x5B57;&#x3001;&#x5B57;&#x7B26;(rune)&#x3001;&#x5B57;&#x7B26;&#x4E32;&#x6216;&#x5E03;&#x5C14;&#x503C;&#x3002;&#x7531;&#x4E8E;&#x7F16;&#x8BD1;&#x65F6;&#x7684;&#x9650;&#x5236;&#xFF0C;&#x5B9A;&#x4E49;&#x5B83;&#x4EEC;&#x7684;&#x8868;&#x8FBE;&#x5F0F;&#x5FC5;&#x987B;&#x662F;&#x53EF;&#x4EE5;&#x88AB;&#x7F16;&#x8BD1;&#x5668;&#x6C42;&#x503C;&#x7684;&#x5E38;&#x91CF;&#x8868;&#x8FBE;&#x5F0F;&#x3002;</p>
<h4 id="init%E5%87%BD%E6%95%B0">init&#x51FD;&#x6570;</h4>
<h4 id="pointer-vs-values">Pointer vs. Values</h4>
<p>The rule about pointers vs. values for receivers is that value methods can be invoked on pointers and values, but pointer methods can only be invoked on pointers. This is because pointer methods can modify the receiver; invoking them on a copy of the value would cause those modifications to be discarded.</p>
<h4 id="interface-conversions-and-type-assertions">Interface conversions and type assertions</h4>
<p>A type assertion takes an interface value and extracts from it a value of the specified explicit type. :</p>
<p><code>value.(typeName)</code></p>
<p>for example, to extract the string we know is in the value, we could write:</p>
<p><code>str := value.(string)</code></p>
<p>But if it turns out that the value does not contain a string, the program will crash with a run-time error. To guard against that, use the &quot;comma, ok&quot; idiom to test, safely, whether the value is a string:</p>
<pre><code class="lang-go">str, ok := value.(<span class="hljs-typename">string</span>)
<span class="hljs-keyword">if</span> ok {
  fmt.Printf(<span class="hljs-string">&quot;string value is: %q\n&quot;</span>, str)
} <span class="hljs-keyword">else</span> {
  fmt.Printf(<span class="hljs-string">&quot;value is not a string\n&quot;</span>)
}
</code></pre>
<p>if the type assertion fails, str will still exist and be of type string, but it will have the zero value, an empty string.</p>
<h4 id="interfaces-and-methods">Interfaces and methods</h4>
<p>Since almost anything can have methods attached, almost anything can satisfy an interface. One illustrative example is in the http package, which defines the Handler interface. Any object that implements Handler can serve HTTP requests.</p>
<pre><code class="lang-go"><span class="hljs-keyword">type</span> Handler <span class="hljs-keyword">interface</span> {
  ServeHTTP(ResponseWriter, *Request)
}
</code></pre>
<p>ResponseWriter is itself an interface that provides access to the methods needed to return the response to the client. Those methods include the standard Write method, so an http.ResponseWriter can be used wherever an io.Writer can be used. Request is a struct containing a parsed representation of the request from the client.</p>
<h4 id="import-for-side-effect">Import for side effect</h4>
<p>Sometimes it is useful to import a package only for its side effects, without any explicit use. For example, during its init function, the net/http/pprof package registers HTTP handlers that provide debugging information. It has an exported API, but most clients need only the handler registration and access the data through a web page. To import the package only for its side effects, rename the package to the blank identifier:</p>
<p><code>import _ &quot;net/http/pprof&quot;</code></p>
<p>This form of import makes clear that the package is being imported for its side effects, because there is no other possible use of the package.</p>
<h4 id="embedding">Embedding</h4>
<p>Go does not provide the typical, type-driven notion of subclassing, but it does have the ability to &quot;borrow&quot; pieces of an implementation by embedding types within a struct or interface.</p>
<pre><code class="lang-go"><span class="hljs-keyword">type</span> Reader <span class="hljs-keyword">interface</span> {
  Read(p []<span class="hljs-typename">byte</span>) (n <span class="hljs-typename">int</span>, err error)
}
<span class="hljs-keyword">type</span> Writer <span class="hljs-keyword">interface</span> {
  Write(p []<span class="hljs-typename">byte</span>) (n <span class="hljs-typename">int</span>, err error)
}
<span class="hljs-comment">// ReadWriter is the interface that combines the Reader and Writer interfaces.</span>
<span class="hljs-keyword">type</span> ReadWriter <span class="hljs-keyword">interface</span> {
  Reader
  Writer
}
</code></pre>
<p>Only interfaces can be embedded within interfaces.</p>
<p>The same basic idea applies to structs, but with more far-reaching implications. </p>
<pre><code class="lang-go"><span class="hljs-comment">// ReadWriter stores pointers to a Reader and a Writer</span>
<span class="hljs-comment">// It implements io.ReadWriter.</span>
<span class="hljs-keyword">type</span> ReadWriter <span class="hljs-keyword">struct</span> {
  *Reader    <span class="hljs-comment">// *bufio.Reader</span>
  *Writer    <span class="hljs-comment">// *bufio.Writer</span>
}
</code></pre>
<p>There&apos;s an important way in which embedding differs from subclassing. When we embed a type, the methods of that type become methods of the outer type, but when they are invoked the receiver of the method is the inner type, not the outer one.</p>
<p>Embedding types introduces the problem of name conflicts but the rules to resolve them are simple. First, a field or method X hides any other item X in a more deeply nested part of the type. If log.Logger contained a field or method called Command, the Command field of Job would dominate it. </p>
<p>Second, if the same name appears at the same nesting level, it is usually an error; it would be erroneous to embed log.Logger if the Job struct contained another field or method called Logger. However, if the duplicate name is never mentioned in the program outside the type definition, it is OK. </p>
<h3 id="concurrency">Concurrency</h3>
<h4 id="share-by-communicating">Share by communicating</h4>
<p>Go encourages a different approach in which shared values are passed around on channels and, in fact, never actively shared by separate threads of execution. Only one goroutine has access to the value at any given time. Data races cannot occur, by design. To encourage this way of thinking we have reduced it to a slogan:</p>
<p>Do not communicate by sharing memory; instead, share memory by communicating.</p>
<h4 id="goroutines">Goroutines</h4>
<p>A goroutine has a simple model: it is a function executing concurrently with other goroutines in the same address space.</p>
<p>Goroutines are multiplexed onto multiple OS threads so if one should block, such as while waiting for I/O, others continue to run.</p>
<p>A function literal can be handy in a goroutine invocation. </p>
<pre><code class="lang-go"><span class="hljs-keyword">func</span> Announce(message <span class="hljs-typename">string</span>, delay time.Duration) {
  <span class="hljs-keyword">go</span> <span class="hljs-keyword">func</span>() {
    time.Sleep(delay)
    fmt.Println(message)
  }()  <span class="hljs-comment">// Note the parentheses - must call the function.</span>
}
</code></pre>
<p>In Go, function literals are closures: the implementation makes sure the variables referred to by the function survive as long as they are active. </p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../language/go.html" class="navigation navigation-prev " aria-label="Previous page: Go"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../language/go/learning-go.html" class="navigation navigation-next " aria-label="Next page: Go学习笔记"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
