<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>NodeJS | Xiayf的技术笔记</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.3.0">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
    

        
    
    
    <link rel="next" href="../../language/js/node/reading-node.html" />
    
    
    <link rel="prev" href="../../language/js/hybrid-mobile.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="3.4.5" data-basepath="../.." data-revision="Mon Jan 18 2016 13:19:51 GMT+0800 (CST)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="arch/index.html">
            
                
                    <a href="../../arch/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        架构
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="arch/tumblr-arch.html">
            
                
                    <a href="../../arch/tumblr-arch.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Tumblr架构设计
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="arch/latency-output-cost.html">
            
                
                    <a href="../../arch/latency-output-cost.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        &lt;延迟、吞吐、成本那些事&gt;课程笔记
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="arch/reference.html">
            
                
                    <a href="../../arch/reference.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        资料
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="basic/index.html">
            
                
                    <a href="../../basic/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        基础
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="basic/system.html">
            
                
                    <a href="../../basic/system.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        系统编程
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="basic/system/tlpi.html">
            
                
                    <a href="../../basic/system/tlpi.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        读书笔记：Linux/UNIX系统编程手册
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="basic/algorithm.html">
            
                
                    <a href="../../basic/algorithm.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        算法
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="basic/algorithm/introduction-to-algorithm.html">
            
                
                    <a href="../../basic/algorithm/introduction-to-algorithm.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.1.</b>
                        
                        读书笔记：算法导论
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="basic/network.html">
            
                
                    <a href="../../basic/network.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        网络
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="basic/compiler.html">
            
            <span><b>2.4.</b> 编译</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="basic/compiler/flex-bison.html">
            
                
                    <a href="../../basic/compiler/flex-bison.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.1.</b>
                        
                        读书笔记：flex与bison
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="basic/storage.html">
            
            <span><b>2.5.</b> 存储</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="language/index.html">
            
                
                    <a href="../../language/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        编程语言
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="language/python.html">
            
                
                    <a href="../../language/python.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Python
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="language/python/flask.html">
            
                
                    <a href="../../language/python/flask.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.1.</b>
                        
                        Flask
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="language/python/tornado.html">
            
                
                    <a href="../../language/python/tornado.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.2.</b>
                        
                        Tornado
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="language/python/django.html">
            
                
                    <a href="../../language/python/django.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.3.</b>
                        
                        Django
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="language/php.html">
            
                
                    <a href="../../language/php.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        PHP
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="language/php/yii.html">
            
            <span><b>3.2.1.</b> Yii</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="language/php/symfony.html">
            
            <span><b>3.2.2.</b> Symfony</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.2.3" data-path="language/php/internal.html">
            
                
                    <a href="../../language/php/internal.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.3.</b>
                        
                        读书笔记：深入理解PHP内核
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="language/go.html">
            
                
                    <a href="../../language/go.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Go
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="language/go/effective-go.html">
            
                
                    <a href="../../language/go/effective-go.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.1.</b>
                        
                        Effective Go
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3.2" data-path="language/go/learning-go.html">
            
                
                    <a href="../../language/go/learning-go.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.2.</b>
                        
                        读书笔记：Go学习笔记
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3.3" data-path="language/go/reading-beego.html">
            
                
                    <a href="../../language/go/reading-beego.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.3.</b>
                        
                        Beego源码阅读
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="language/js.html">
            
                
                    <a href="../../language/js.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        JavaScript
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.4.1" data-path="language/js/frontend-dv.html">
            
                
                    <a href="../../language/js/frontend-dv.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.1.</b>
                        
                        前端数据可视化
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4.2" data-path="language/js/modular.html">
            
                
                    <a href="../../language/js/modular.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.2.</b>
                        
                        前端模块化
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4.3" data-path="language/js/tools.html">
            
                
                    <a href="../../language/js/tools.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.3.</b>
                        
                        前端工具
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4.4" data-path="language/js/hybrid-mobile.html">
            
                
                    <a href="../../language/js/hybrid-mobile.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.4.</b>
                        
                        混合移动开发
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="3.4.5" data-path="language/js/node.html">
            
                
                    <a href="../../language/js/node.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.5.</b>
                        
                        NodeJS
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.4.5.1" data-path="language/js/node/reading-node.html">
            
                
                    <a href="../../language/js/node/reading-node.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.5.1.</b>
                        
                        NodeJS源码阅读笔记
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="language/css.html">
            
                
                    <a href="../../language/css.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        CSS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="language/c.html">
            
                
                    <a href="../../language/c.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        C
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.6.1" data-path="language/c/learning-c.html">
            
                
                    <a href="../../language/c/learning-c.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.1.</b>
                        
                        读书笔记：C学习笔记
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="language/lua.html">
            
                
                    <a href="../../language/lua.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                        Lua
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="language/java.html">
            
                
                    <a href="../../language/java.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.</b>
                        
                        Java/Scala
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.8.1" data-path="language/java/play.html">
            
                
                    <a href="../../language/java/play.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.1.</b>
                        
                        Play
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.8.2" data-path="language/java/spring.html">
            
                
                    <a href="../../language/java/spring.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.2.</b>
                        
                        Spring
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.8.3" data-path="language/java/spark.html">
            
                
                    <a href="../../language/java/spark.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.3.</b>
                        
                        Spark
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.9" data-path="language/others.html">
            
                
                    <a href="../../language/others.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.9.</b>
                        
                        others
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="operation/index.html">
            
                
                    <a href="../../operation/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        运维
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="operation/os.html">
            
                
                    <a href="../../operation/os.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        操作系统
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="operation/sql.html">
            
                
                    <a href="../../operation/sql.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        SQL
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.2.1" data-path="operation/sql/mysql.html">
            
                
                    <a href="../../operation/sql/mysql.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.1.</b>
                        
                        MySQL
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2.2" data-path="operation/sql/high-performance-mysql.html">
            
                
                    <a href="../../operation/sql/high-performance-mysql.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.2.</b>
                        
                        读书笔记：高性能MySQL
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2.3" data-path="operation/sql/sqlite.html">
            
                
                    <a href="../../operation/sql/sqlite.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.3.</b>
                        
                        SQLite
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="operation/nosql.html">
            
                
                    <a href="../../operation/nosql.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        NoSQL
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.3.1" data-path="operation/nosql/redis-design-implementation.html">
            
                
                    <a href="../../operation/nosql/redis-design-implementation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.1.</b>
                        
                        读书笔记：Redis设计与实现
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="operation/mq.html">
            
                
                    <a href="../../operation/mq.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        MQ
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="operation/nginx.html">
            
                
                    <a href="../../operation/nginx.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Nginx
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.5.1" data-path="operation/nginx/openresty.html">
            
                
                    <a href="../../operation/nginx/openresty.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.1.</b>
                        
                        OpenResty
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="operation/haproxy.html">
            
                
                    <a href="../../operation/haproxy.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        HAProxy
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.6.1" data-path="operation/haproxy/conf-manual.html">
            
                
                    <a href="../../operation/haproxy/conf-manual.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.1.</b>
                        
                        HAProxy文档精简翻译版
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="operation/others.html">
            
                
                    <a href="../../operation/others.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                        其他
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="others/index.html">
            
                
                    <a href="../../others/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        其他
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="others/refactoring.html">
            
                
                    <a href="../../others/refactoring.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        读书笔记：重构
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="others/sicp.html">
            
                
                    <a href="../../others/sicp.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        读书笔记：计算机程序的构造与解释
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="others/quotes.html">
            
                
                    <a href="../../others/quotes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        启示语录
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="others/web.html">
            
                
                    <a href="../../others/web.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        Web开发
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="others/ds.html">
            
                
                    <a href="../../others/ds.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        分布式系统
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="others/security.html">
            
                
                    <a href="../../others/security.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                        信息安全
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="others/stackoverflow-collection.html">
            
                
                    <a href="../../others/stackoverflow-collection.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                        StackOverflow问答精选
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="others/other.html">
            
                
                    <a href="../../others/other.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.</b>
                        
                        碎碎念
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.8.1" data-path="others/other/inspired.html">
            
                
                    <a href="../../others/other/inspired.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.1.</b>
                        
                        启示录
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.8.2" data-path="others/other/taobao-ten-years.html">
            
                
                    <a href="../../others/other/taobao-ten-years.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.8.2.</b>
                        
                        读书笔记：淘宝技术这十年
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Xiayf的技术笔记</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="nodejs">NodeJS</h1>
<h2 id="%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86">&#x57FA;&#x672C;&#x77E5;&#x8BC6;</h2>
<p>Try changing the registry to the http version rather that the default https one using the command&#xFF1A;</p>
<pre><code class="lang-shell">npm config set registry http://registry.npmjs.org/
</code></pre>
<hr>
<p>To get the exact filename that will be loaded when <code>require()</code> is called, use the <code>require.resolve()</code> function.</p>
<p>Here is the high-level algorithm in pseudocode of what require.resolve does:</p>
<pre><code>require(X) from module at path Y
1. If X is a core module,
   a. return the core module
   b. STOP
2. If X begins with &apos;./&apos; or &apos;/&apos; or &apos;../&apos;
   a. LOAD_AS_FILE(Y + X)
   b. LOAD_AS_DIRECTORY(Y + X)
3. LOAD_NODE_MODULES(X, dirname(Y))
4. THROW &quot;not found&quot;

LOAD_AS_FILE(X)
1. If X is a file, load X as JavaScript text.  STOP
2. If X.js is a file, load X.js as JavaScript text.  STOP
3. If X.json is a file, parse X.json to a JavaScript Object.  STOP
4. If X.node is a file, load X.node as binary addon.  STOP

LOAD_AS_DIRECTORY(X)
1. If X/package.json is a file,
   a. Parse X/package.json, and look for &quot;main&quot; field.
   b. let M = X + (json main field)
   c. LOAD_AS_FILE(M)
2. If X/index.js is a file, load X/index.js as JavaScript text.  STOP
3. If X/index.json is a file, parse X/index.json to a JavaScript object. STOP
4. If X/index.node is a file, load X/index.node as binary addon.  STOP

LOAD_NODE_MODULES(X, START)
1. let DIRS=NODE_MODULES_PATHS(START)
2. for each DIR in DIRS:
   a. LOAD_AS_FILE(DIR/X)
   b. LOAD_AS_DIRECTORY(DIR/X)

NODE_MODULES_PATHS(START)
1. let PARTS = path split(START)
2. let I = count of PARTS - 1
3. let DIRS = []
4. while I &gt;= 0,
   a. if PARTS[I] = &quot;node_modules&quot; CONTINUE
   c. DIR = path join(PARTS[0 .. I] + &quot;node_modules&quot;)
   b. DIRS = DIRS + DIR
   c. let I = I - 1
5. return DIRS
</code></pre><hr>
<p>Modules are cached based on their resolved filename. Since modules may resolve to a different filename based on the location of the calling module (loading from node_modules folders), it is not a guarantee that require(&apos;foo&apos;) will always return the exact same object, if it would resolve to different files.</p>
<hr>
<p>NodeJS&#x5185;&#x90E8;&#x67B6;&#x6784;&#x56FE;&#xFF1A;</p>
<p><img src="media/nodejsarch.png" alt="node-internal-arch"></p>
<hr>
<p><code>Buffer</code>&#x4E0E;&#x5B57;&#x7B26;&#x4E32;&#x6709;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x533A;&#x522B;: &#x5B57;&#x7B26;&#x4E32;&#x662F;&#x53EA;&#x8BFB;&#x7684;&#xFF0C;&#x5E76;&#x4E14;&#x5BF9;&#x5B57;&#x7B26;&#x4E32;&#x7684;&#x4EFB;&#x4F55;&#x4FEE;&#x6539;&#x5F97;&#x5230;&#x7684;&#x90FD;&#x662F;&#x4E00;&#x4E2A;&#x65B0;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x539F;&#x5B57;&#x7B26;&#x4E32;&#x4FDD;&#x6301;&#x4E0D;&#x53D8;&#x3002;&#x81F3;&#x4E8E;<code>Buffer</code>&#xFF0C;&#x66F4;&#x50CF;&#x662F;&#x53EF;&#x4EE5;&#x505A;&#x6307;&#x9488;&#x64CD;&#x4F5C;&#x7684;C&#x8BED;&#x8A00;&#x6570;&#x7EC4;&#x3002;&#x4F8B;&#x5982;&#xFF0C;&#x53EF;&#x4EE5;&#x7528;<code>[index]</code>&#x65B9;&#x5F0F;&#x76F4;&#x63A5;&#x4FEE;&#x6539;&#x67D0;&#x4E2A;&#x4F4D;&#x7F6E;&#x7684;&#x5B57;&#x8282;&#x3002;</p>
<p>&#x800C;<code>.slice</code>&#x65B9;&#x6CD5;&#x4E5F;&#x4E0D;&#x662F;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<code>Buffer</code>&#xFF0C;&#x800C;&#x66F4;&#x50CF;&#x662F;&#x8FD4;&#x56DE;&#x4E86;&#x6307;&#x5411;&#x539F;<code>Buffer</code>&#x4E2D;&#x95F4;&#x7684;&#x67D0;&#x4E2A;&#x4F4D;&#x7F6E;&#x7684;&#x6307;&#x9488;&#xFF0C;&#x56E0;&#x6B64;&#x5BF9;<code>.slice</code>&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x7684;<code>Buffer</code>&#x7684;&#x4FEE;&#x6539;&#x4F1A;&#x4F5C;&#x7528;&#x4E8E;&#x539F;<code>Buffer</code>&#x3002;</p>
<p>&#x4E5F;&#x56E0;&#x6B64;&#xFF0C;&#x5982;&#x679C;&#x60F3;&#x8981;&#x62F7;&#x8D1D;&#x4E00;&#x4EFD;<code>Buffer</code>&#xFF0C;&#x5F97;&#x9996;&#x5148;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x65B0;&#x7684;<code>Buffer</code>&#xFF0C;&#x5E76;&#x901A;&#x8FC7;<code>.copy</code>&#x65B9;&#x6CD5;&#x628A;&#x539F;<code>Buffer</code>&#x4E2D;&#x7684;&#x6570;&#x636E;&#x590D;&#x5236;&#x8FC7;&#x53BB;&#x3002;&#x8FD9;&#x4E2A;&#x7C7B;&#x4F3C;&#x4E8E;&#x7533;&#x8BF7;&#x4E00;&#x5757;&#x65B0;&#x7684;&#x5185;&#x5B58;&#xFF0C;&#x5E76;&#x628A;&#x5DF2;&#x6709;&#x5185;&#x5B58;&#x4E2D;&#x7684;&#x6570;&#x636E;&#x590D;&#x5236;&#x8FC7;&#x53BB;&#x3002;</p>
<hr>
<p>&#x4EFB;&#x4F55;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x90FD;&#x6709;&#x542F;&#x52A8;&#x8FDB;&#x7A0B;&#x65F6;&#x4F7F;&#x7528;&#x7684;&#x547D;&#x4EE4;&#x884C;&#x53C2;&#x6570;&#xFF0C;&#x6709;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#xFF0C;&#x6709;&#x8FD0;&#x884C;&#x6743;&#x9650;&#xFF0C;&#x6709;&#x8FD0;&#x884C;&#x73AF;&#x5883;&#x548C;&#x8FD0;&#x884C;&#x72B6;&#x6001;&#x3002;&#x5728;NodeJS&#x4E2D;&#xFF0C;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;process&#x5BF9;&#x8C61;&#x611F;&#x77E5;&#x548C;&#x63A7;&#x5236;NodeJS&#x81EA;&#x8EAB;&#x8FDB;&#x7A0B;&#x7684;&#x65B9;&#x65B9;&#x9762;&#x9762;&#x3002;&#x53E6;&#x5916;&#x9700;&#x8981;&#x6CE8;&#x610F;&#x7684;&#x662F;&#xFF0C;process&#x4E0D;&#x662F;&#x5185;&#x7F6E;&#x6A21;&#x5757;&#xFF0C;&#x800C;&#x662F;&#x4E00;&#x4E2A;&#x5168;&#x5C40;&#x5BF9;&#x8C61;&#xFF0C;&#x56E0;&#x6B64;&#x5728;&#x4EFB;&#x4F55;&#x5730;&#x65B9;&#x90FD;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;&#x3002;</p>
<hr>
<p><code>cluster</code>&#x6A21;&#x5757;&#x662F;&#x5BF9;<code>child_process</code>&#x6A21;&#x5757;&#x7684;&#x8FDB;&#x4E00;&#x6B65;&#x5C01;&#x88C5;&#xFF0C;&#x4E13;&#x7528;&#x4E8E;&#x89E3;&#x51B3;&#x5355;&#x8FDB;&#x7A0B;NodeJS Web&#x670D;&#x52A1;&#x5668;&#x65E0;&#x6CD5;&#x5145;&#x5206;&#x5229;&#x7528;&#x591A;&#x6838;CPU&#x7684;&#x95EE;&#x9898;&#x3002;&#x4F7F;&#x7528;&#x8BE5;&#x6A21;&#x5757;&#x53EF;&#x4EE5;&#x7B80;&#x5316;&#x591A;&#x8FDB;&#x7A0B;&#x670D;&#x52A1;&#x5668;&#x7A0B;&#x5E8F;&#x7684;&#x5F00;&#x53D1;&#xFF0C;&#x8BA9;&#x6BCF;&#x4E2A;&#x6838;&#x4E0A;&#x8FD0;&#x884C;&#x4E00;&#x4E2A;&#x5DE5;&#x4F5C;&#x8FDB;&#x7A0B;&#xFF0C;&#x5E76;&#x7EDF;&#x4E00;&#x901A;&#x8FC7;&#x4E3B;&#x8FDB;&#x7A0B;&#x76D1;&#x542C;&#x7AEF;&#x53E3;&#x548C;&#x5206;&#x53D1;&#x8BF7;&#x6C42;&#x3002;</p>
<hr>
<p>NodeJS&#x7A0B;&#x5E8F;&#x7684;&#x6807;&#x51C6;&#x8F93;&#x5165;&#x6D41;&#xFF08;stdin&#xFF09;&#x3001;&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x8F93;&#x51FA;&#x6D41;&#xFF08;stdout&#xFF09;&#x3001;&#x4E00;&#x4E2A;&#x6807;&#x51C6;&#x9519;&#x8BEF;&#x6D41;&#xFF08;stderr&#xFF09;&#x5206;&#x522B;&#x5BF9;&#x5E94;<code>process.stdin</code>&#x3001;<code>process.stdout</code>&#x548C;<code>process.stderr</code>&#xFF0C;&#x7B2C;&#x4E00;&#x4E2A;&#x662F;&#x53EA;&#x8BFB;&#x6570;&#x636E;&#x6D41;&#xFF0C;&#x540E;&#x8FB9;&#x4E24;&#x4E2A;&#x662F;&#x53EA;&#x5199;&#x6570;&#x636E;&#x6D41;&#xFF0C;&#x5BF9;&#x5B83;&#x4EEC;&#x7684;&#x64CD;&#x4F5C;&#x6309;&#x7167;&#x5BF9;&#x6570;&#x636E;&#x6D41;&#x7684;&#x64CD;&#x4F5C;&#x65B9;&#x5F0F;&#x5373;&#x53EF;</p>
<hr>
<p><img src="media/14517882569110.jpg" alt=""></p>
<hr>
<p>JS&#x81EA;&#x8EAB;&#x63D0;&#x4F9B;&#x7684;&#x5F02;&#x5E38;&#x6355;&#x83B7;&#x548C;&#x5904;&#x7406;&#x673A;&#x5236; &#x2014;&#x2014; <code>try..catch..</code>&#xFF0C;&#x53EA;&#x80FD;&#x7528;&#x4E8E;&#x540C;&#x6B65;&#x6267;&#x884C;&#x7684;&#x4EE3;&#x7801;&#x3002;</p>
<hr>
<p><code>exports</code>&#x548C;<code>module.exports</code>&#x8FD9;&#x4E24;&#x8005;&#x6709;&#x4EC0;&#x4E48;&#x533A;&#x522B;&#x5462;&#xFF1F;</p>
<p>&#x5176;&#x5B9E;&#x5728;NodeJS&#x5185;&#x90E8;&#xFF0C;&#x6A21;&#x5757;&#x771F;&#x6B63;&#x8FD4;&#x56DE;&#x7684;&#x662F;<code>module.exports</code>&#x5BF9;&#x8C61;&#xFF0C;&#x800C;<code>exports</code>&#x53EA;&#x662F;<code>module.exports</code>&#x7684;&#x5F15;&#x7528;&#x800C;&#x5DF2;&#x3002;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre><code class="lang-javascript">exports = <span class="hljs-built_in">module</span>.exports = {};
</code></pre>
<p>&#x5982;&#x679C;&#x4F60;&#x76F4;&#x63A5;&#x8D4B;&#x503C;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#xFF08;function&#xFF09;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#xFF08;<code>{}</code>&#xFF09;&#x7ED9;<code>exports</code>&#xFF0C;&#x8FD9;&#x6837;&#x7684;&#x8BDD;&#x5C31;&#x7834;&#x574F;&#x4E86;<code>exports</code>&#x548C;<code>module.exports</code>&#x7684;&#x5F15;&#x7528;&#x5173;&#x7CFB;&#x4E86;&#xFF0C;&#x800C;&#x6A21;&#x5757;&#x5C06;&#x4F1A;&#x8FD4;&#x56DE;&#x7A7A;&#x5BF9;&#x8C61;&#x3002;&#x6240;&#x4EE5;&#x5F53;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x66B4;&#x9732;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x5E94;&#x8BE5;&#x76F4;&#x63A5;&#x8D4B;&#x503C;&#x7ED9;<code>module.exports</code>&#x800C;&#x4E0D;&#x662F;<code>exports</code>&#x3002;</p>
<h2 id="%E5%80%BC%E5%BE%97%E5%85%B3%E6%B3%A8">&#x503C;&#x5F97;&#x5173;&#x6CE8;</h2>
<ul>
<li><a href="http://libuv.org/" target="_blank">libuv</a></li>
<li><a href="https://github.com/caolan/async" target="_blank">Async.js</a></li>
<li><a href="https://lodash.com" target="_blank">lodash</a></li>
<li><a href="https://github.com/etsy/statsd" target="_blank">statsd</a></li>
<li><a href="https://github.com/atom/electron" target="_blank">electron</a></li>
</ul>
<h2 id="%E6%8E%A8%E8%8D%90%E9%98%85%E8%AF%BB">&#x63A8;&#x8350;&#x9605;&#x8BFB;</h2>
<ul>
<li><a href="http://luohaha.github.io/Chinese-uvbook/" target="_blank">libuv&#x4E2D;&#x6587;&#x6559;&#x7A0B;</a></li>
<li><a href="https://github.com/getify/You-Dont-Know-JS" target="_blank">You-Dont-Know-JS Series</a></li>
<li><a href="https://github.com/sindresorhus/awesome-electron" target="_blank">awesome-electron</a></li>
<li><a href="http://mcgill-csus.github.io/student_projects/Submission2.pdf" target="_blank">An Inside Look at the Architecture of NodeJS</a> &#x221A;</li>
<li><a href="https://github.com/felixge/node-style-guide" target="_blank">Node.js Style Guide</a> &#x221A;</li>
<li><a href="https://nodejs.org/en/docs/guides/anatomy-of-an-http-transaction/" target="_blank">Anatomy of an HTTP Transaction</a> &#x221A;</li>
<li><a href="https://github.com/mattdesl/module-best-practices" target="_blank">module best practices</a> &#x221A;</li>
<li><a href="https://github.com/substack/stream-handbook" target="_blank">stream-handbook</a> &#x221A; &#x503C;&#x5F97;&#x5173;&#x6CE8;&#x4F7F;&#x7528;</li>
<li><a href="https://medium.com/@yoshuawuyts/mastering-the-filesystem-in-node-js-4706b7cb0801#.dermpbiul" target="_blank">Mastering the filesystem in Node.js</a> &#x221A;</li>
<li><a href="http://caolan.org/posts/nodejs_style_and_structure/" target="_blank">Node.js: Style and structure</a> &#x221A; &#x975E;&#x5E38;&#x8D5E;&#xFF01;</li>
<li><a href="http://nqdeng.github.io/7-days-nodejs/" target="_blank">&#x4E03;&#x5929;&#x5B66;&#x4F1A;NodeJS</a> &#x221A; &#x633A;&#x4E0D;&#x9519;&#xFF01;</li>
</ul>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../language/js/hybrid-mobile.html" class="navigation navigation-prev " aria-label="Previous page: 混合移动开发"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../language/js/node/reading-node.html" class="navigation navigation-next " aria-label="Next page: NodeJS源码阅读笔记"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
